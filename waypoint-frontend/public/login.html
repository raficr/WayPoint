<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="login.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    
    <div class="login-container">
        <h2 class="login-title">
            <span class="letter">L</span>
            <span class="letter">O</span>
            <span class="letter">G</span>
            <span class="letter">I</span>
            <span class="letter">N</span>
        </h2>

        <form method="post">
            <div class="input-group">
                <input type="text" name="username" id="username" required placeholder="Enter Your Username">
            </div>

            <div class="input-group">
                <input type="password" name="password" id="password" required placeholder="Enter Your Password">
            </div>

            <button type="submit" class="login-btn">Login</button>

            <!-- Centered Google Login -->
            <div class="google-login">
                <div id="g_id_onload"
                    data-client_id="64105108283-voa2kmgn2jkn1193ug80g9tumn6n0kqj.apps.googleusercontent.com"
                    data-context="signin"
                    data-ux_mode="popup"
                    data-callback="handleCredentialResponse"
                    data-auto_prompt="false">
                </div>

                <div class="g_id_signin"
                    data-type="standard"
                    data-size="large"
                    data-theme="outline"
                    data-text="signin_with"
                    data-shape="rectangular"
                    data-logo_alignment="left">
                </div>
            </div>

            <p class="signup-text">Don't have an account? <a href="signup.html">Sign Up</a></p>
        </form>
    </div>

    <script>
        function handleCredentialResponse(response) {
            console.log("Encoded JWT ID token: " + response.credential);
            const payload = JSON.parse(atob(response.credential.split(".")[1]));
            console.log("User Info:", payload);
            localStorage.setItem("googleUser", JSON.stringify(payload));
            alert("Welcome, " + payload.name);
            window.location.href = "index.html";
        }
    </script>
</body>
</html>
